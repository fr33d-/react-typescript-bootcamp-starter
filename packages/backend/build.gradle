buildscript {
    repositories {
        mavenCentral()
        jcenter()
    }

    dependencies {
        classpath "cz.habarta.typescript-generator:typescript-generator-gradle-plugin:2.+"
    }
}

plugins {
    id "org.springframework.boot" version "2.1.6.RELEASE"
    id "java"
}

apply plugin: "io.spring.dependency-management"
apply plugin: "cz.habarta.typescript-generator"

group = "com.reply.comsysto.rustylobster"
version = "1.0.0-SNAPSHOT"
sourceCompatibility = "11"

configurations {
    developmentOnly
    runtimeClasspath {
        extendsFrom developmentOnly
    }
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenCentral()
    jcenter()
}

dependencies {
    implementation "org.springframework.boot:spring-boot-starter-data-jpa"
    implementation "org.springframework.boot:spring-boot-starter-web"
    implementation "org.springframework.boot:spring-boot-starter-security"
    compileOnly "org.projectlombok:lombok"
    annotationProcessor "org.projectlombok:lombok"
    compile "com.h2database:h2"
    annotationProcessor "org.springframework.boot:spring-boot-configuration-processor"
    testImplementation "org.springframework.boot:spring-boot-starter-test"
    testCompile "org.junit.jupiter:junit-jupiter-api"
    testRuntime "org.junit.jupiter:junit-jupiter-engine"
    testCompile "org.hamcrest:hamcrest-junit:2.0.0.0"
    testCompile "com.jayway.jsonpath:json-path-assert"
    compile "io.springfox:springfox-swagger2:2.9.2"
    compile "io.springfox:springfox-swagger-ui:2.9.2"
    compile "com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider:2.9.2"
    compile "io.jsonwebtoken:jjwt-api:0.10.7"
    runtime "io.jsonwebtoken:jjwt-impl:0.10.7"
    runtime "io.jsonwebtoken:jjwt-jackson:0.10.7"
    implementation "com.github.javafaker:javafaker:0.18"
    compile "com.google.guava:guava:28.0-jre"
}

test {
    useJUnitPlatform()
}

generateTypeScript {
    jsonLibrary = "jackson2"
    classPatterns = [
            "com.reply.comsysto.rustylobster.backend.models.dtos.*"
    ]
    declarePropertiesAsReadOnly = true
    sortDeclarations = true
    outputKind = "ambientModule"
    outputFile = "../frontend/src/typings/rusty-lobster-dtos/index.d.ts"
    module = "rusty-lobster-dtos"
}
